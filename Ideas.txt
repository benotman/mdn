



/*
************  To DO List
- Modify Document.ready to load orginal style for only displayed diagrams
-- Whenever we load hidden diagram for the first time, we save original style then we update element styles according 
   to visual elements array

related_highlighted_elements
  changed or not

hover 
  hover related vosual elements

select
  element related to visual element and content elements -> select
  related to visual elements only -> select so a user can see related elements in other diagrams
  related to content elements only -> yes, so a user can see retrieve content elements and see false (no )   
  
  element with no connections -> discard
  
  element with connections
    allow hover
	   current element is ok (since element is already displayed)
	   related elements in displayed diagrams -> ok
	   related elements in undisplayed diagrams -> discard
	   
	   so highlightedelements array contain only elements in displayed diagrams
	allow selection

***Diagrams ***	
- We have several diagrams
- we start with on-load diagrams
--- we have connections array for onload diagrams + content (CHANGE to ALL Diagrams)
--- we have list of visual elements for onload diagrams (CHANGE to ALL Diagrams) 
--- we need to have array_Current_Diagrams

in mouseHover
   change to hoverStyle if element has connections to anything (content, displayed diagrams, hidden diagrams)
      This to indicate the element is clickable
   retrieve connections to visual elements in displayed diagrams
   
in click
   select element if it has connections to anything (basically if an element is hoverable it is selectable)
   update the list of visual elements 

When displaying a hidden diagram
   check if there is highlighted elements exist -> change their style
When hiding a diagram current element styles are kept in the visual elements array
   the diagram will probably be removed from the html
when redisplaying a diagram update element styles according to the list of visual elements

   

------ connections to visual elements to currently displayed diagrams  
- user can load other diagrams any time
-  we add  
	
diagrams
  selection window
  load diagram, load connections
  
  
    


// styles
   diagram selection, hover, highlighted should be the same (to be understandable)


   send element id only
   I can have a property of the svg_id in each element
   in generic event handler, extract the svg_id when calling connections
   
   item_id, original fill, ..., # of incoming highlighting requests
   
   
   load all visual elements (that have connections) for default diagrams (then load visual elements for later loaded diagrams)
   
   element_id, original_color, # of incoming highlighting
   I worked less hours today as I was busy with family paperwork. I am still working on element selection. I thought I can save the original style of each diagram element in its dom element but that does not seem to work; both jQuery and regular dom methods return errors. I think  that is because of the custom attribute I am adding to the svg. Now I am changing to passing a list of all diagram elements with their styles from php to javascript. I am including only elements which have connections to other elements in other diagrams.    
   
   
   when click
     when change to selected 
	    if not in array add it with color saved before hover
        		
	 when restore to highlighted
	 
	 when 
         
   
   when do I change style
   select
      for first time (not found in array)
	    add item in array with original color (saved before hover)
	  else
        		  
   hoverout
   
hover 
  I need to save regular, hover, select, and related colours 
    hover (change current element using hover class e.g. diagram1:hover fill = )
    mousehover
      related elements -> save their style then change their style
    mouseout
      related elements -> go back to original style

	
	changes possible when a mouse enters an element
	  0 -> 1 unselected to selected
	  selected to unselected
	  unselected to highlighted (impossible)
	  highlighted to unselected (inpossible)
	  highlighted to selected
	  selected to highlighted
	
flag keepColor	
	
    click_event	 
	  if(current is unselected or highlighted) // add status to array (0 unselected, 1 selected, 2 highlighted)
         change current to selected
	     highlight_related(viewid, id)
		   related = grep related elements in connections
		   for each i element in related
		      if i exist in highlighted
			    increment highlighted_count
			  else
                add i to highlighted and change color to highlighted				  
	  else // current is selected
		 if (highlight_count >0)
			change current to highlighted (diagram highlighted color)
         else
            change current to regular
         end if
		 unhighlight_related(viewid, id)
		   grep related elements from connections
		      grep related from highlighted
			    decrease and if anyone is 0 => unhighlight
      end if		 
      related elements -> 

regular, selected, highlighted	 
   show related content (button)	 
      
  class hover can change current element 
  change class 
*/